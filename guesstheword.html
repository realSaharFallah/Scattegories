<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Guessing Game</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <title>Guess the Word</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Didact+Gothic&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Nunito' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="stilark.css">
    <style>
        body{
            background-color: aliceblue;
        }

        .gamecontainer {
            width: 70%;
            height: 70%;
            margin: auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            font-family: "Nunito";
            overflow-y: auto; /* Can scroll */
            scrollbar-color: grey white;
            
        }

        .gamecontainer h1{
            font-family: "Poppins";
            font-weight: normal;
            font-size: 50px;
            padding: 10px;
            opacity: 0;
            transition: 0.5s;

        }

        .gamecontainer h2{
            color: white;
            background-color: #282828;
            font-size: 30px;
            margin: 30px auto;
            font-family: Arial, Helvetica, sans-serif;
            font-weight: normal;
            padding: 10px;
            width: fit-content;
            
        }

        #welcome{
            cursor: pointer;
        }

        nav a{
            transition: 0.5s all;
            color: black;
        }


        nav a:hover{
            background-color: rgb(188, 187, 187);
        }

        input{
            width: 80%;
            padding: 10px;
            margin: 10px auto;
            font-size: 30px;
            border: none;
            border-radius: 4px;
            outline: none;
            text-align: center;
        }
        

        .gamecontainer button {
            background-color: transparent;
            font-family: "Poppins",sans-serif;
            font-size: 20px;
            margin: 20px auto;
            color: black;
            padding: 10px;
            cursor: pointer;
            width:60%;
        }

        .gamecontainer button:hover{
            background-color: rgb(213, 229, 245);
            transition: background-color 1s;

        }

        #givenhints{
            width: 60%;
            color: black;
            border: 2px solid rgb(189, 214, 239);
            border:none;
            width: 50%;
            font-size: 20px;
        }

        #questionsbox{
            display: flex;
            width: 100%;
            opacity: 0;
            transition: 0.5s;

        }

        #topBox{
            display: flex;
            flex-direction: column;
            width: 100%;
            margin-top: 10px;
            opacity: 0;
            transition: 0.5s;

        }

        #result{
            width: 100%;
            height: 30px;
            font-size: 30px;
            color: red;
            padding: 5px;
        }

        #hearts{
            padding: 5px;
            display: flex;
            justify-content: flex-end;
            margin-top: -40px;
            z-index: 1;
        }

        .heart{
            width: 3%;
            margin: 2px;
            transition: opacity 1s ;
        }

        #gamedescription{
            z-index: 2;
            position: absolute;
            top: 50%;
            left: 50%;
            overflow-y: auto;
            transform: translate(-50%, -50%);
            width: 30%;
            height: 30%;
            padding: 30px;
            height: 50%;
            text-align: center;
            font-family:"Nunito";
            font-weight:lighter;
            border-radius: 8px;
            display: flex;
            border: 3px solid rgb(112, 184, 255);
            background-color: #faf9f9;
            color: black;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1s;

        }
        
        #startgameBtn{
        padding: 12px;
        width: 30%;
        border-radius: 8px;
        border: 1px solid rgb(112, 184, 255) ;
        background-color: white;
        cursor: pointer;
        margin: 10px;
        outline: none;
        font-size: 17px;
        transition: 0.5s;
    }

    #thequestions{
        width: 50%;
    }

    @media(max-width:850px){

        #result{
            text-align: left;
            font-size: 10px;
            
        }
        
        #gamedescription {
            font-size: 15px;
            height: 300px;
            width: 60%;
            line-height: 30px;

        }

        #gamedescription h1{
            font-size: 30px;
            margin-top: 100px;
        }

        #gamedescription button{
            width: 80%;
        }

        #questionsbox{
            display: flex;
            flex-direction: column;
            width: 100%;
        }

        #questionsbox div{
            width: 100%;
        }

        #container{
            margin-top: 460px !important;
        }

        #resultBox{
            width: 80%;
            font-size: 13px;
        }

        nav {
            position: static;
        }

        #thequestions{
            width: 100%;
        }

        .heart{
            width: 6%;
        }

        #headerCont{
            font-size: 30px;
        }

        input{
            width: 70%;
        }

    }



    </style>
</head>
<body>

    <header style="background-color: transparent;">
        <nav>
            <a href="aboutus.html">About us</a>
        </nav>
    </header>

    <div id="gamedescription">
        <h1 id="desh1" style="padding: 10px;">Welcome to the Word Guessing Game!</h1>
        <p id="desp" >Try to guess the hidden word by entering your guesses. Need help? Use hints like definitions, synonyms, and more. But be careful, you only have five chances to guess and five lives. Remember to try different forms of the same word (plural and singular). Good luck!</p>
        <button id="startgameBtn">Start</button>
    </div>

    <h1 class="welcome-text" id="welcome" style="color: black; max-width: 80%; position: relative; left: 0;"></h1>

    <div class="gamecontainer">

        <h1 id="headerCont" style="border-bottom: solid 3px black; background-color: rgb(189, 214, 239);">Word Guessing Game</h1>

        <div id="topBox">
        <div id="result"></div>

        <!-- Hearts container -->
        <div class="hearts" id="hearts">
            <img class="heart" src="Media/redheart.png" alt="picture of a red heart">
            <img class="heart" src="Media/redheart.png" alt="picture of a red heart">
            <img class="heart" src="Media/redheart.png" alt="picture of a red heart">
            <img class="heart" src="Media/redheart.png" alt="picture of a red heart">
            <img class="heart" src="Media/redheart.png" alt="picture of a red heart">
        </div>
        </div>

        <div id="questionsbox">
            <div id="thequestions">
                <h2>What is the word?</h2>
                <input autocomplete="off" type="text" id="guessInput" placeholder="Enter your guess">
                <div style="display: flex; flex-direction: column; width: 100%;">
                    <button onclick="checkAnswer()">Check Guess</button>
                    <button id="hintBtn" onclick="showHints()">Give Me a Hint</button>
                </div>
            </div>
        <div id="givenhints">
            <h2>Given Hints: </h1>
        </div>
        </div>

    

    <script>
        const welcome = document.getElementById("welcome")
        welcome.addEventListener("click",function(){
            window.location.href="welcome.html"
        })

        let header = document.querySelector("header")
        header.style.opacity = '1'

        let welcomeText = document.getElementById("welcome")
        // Retrieve the username from local storage
        const username = localStorage.getItem("username");

        welcomeText.textContent = "Welcome, " + username + "!"

        welcomeText.style.position = "absolute"
        welcomeText.style.fontSize = "20px"
        welcomeText.style.fontWeight = "normal"
        welcomeText.style.top = '15px'
        
        welcomeText.style.paddingTop = '0px'
        welcomeText.style.left = '20px'
        welcomeText.style.marginLeft = '20px'
        welcomeText.style.zIndex = 2

        document.addEventListener("DOMContentLoaded", function(event) {
            startGame()
        })

        let word = ""
        let hints = []
        let lives = 5 // Number of lives
        let currentHintIndex = 0
        const hintBtn = document.getElementById("hintBtn")
        const startgameBtn = document.getElementById("startgameBtn")
        const topBox = document.getElementById("topBox")
        const questionsbox = document.getElementById("questionsbox")
        const headerCont = document.getElementById("headerCont")
        const gamedescription = document.getElementById("gamedescription")
        const gamecontainer = document.querySelector(".gamecontainer")

        startgameBtn.addEventListener("click", function(){
            questionsbox.style.opacity = "1"
            topBox.style.opacity = "1"
            headerCont.style.opacity = "1"
            gamedescription.style.opacity = "0"
            gamedescription.style.zIndex = "0"            
            gamecontainer.style.zIndex = "2"
        })

        async function startGame() {
            const response = await fetch("words.txt");
            const text = await response.text();
            const words = text.split("\n");
            word = words[Math.floor(Math.random() * words.length)].trim();
            getWordHints(word);
        }
        
        function showHints() {
            const hintContainer = document.getElementById("givenhints");
            if (currentHintIndex < hints.length) {
                hintContainer.innerHTML += hints[currentHintIndex] + "<br>";
                currentHintIndex++;
            } else {
                alert("No more hints!")
                hintBtn.style.opacity="0"
            }
        }

        async function getWordHints(word) {
            const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
            const data = await response.json();
            if (!data || data.length === 0 || (data.title === "No Definitions Found" && data.message === "Sorry pal, we couldn't find definitions for the word you were looking for.")) {
                startGame();
                return;
            }
            const meanings = data[0].meanings[0];
            hints.push(`Part of Speech: ${meanings.partOfSpeech}`);
            meanings.definitions.forEach((definition, index) => {
                hints.push(`Definition ${index + 1}: ${definition.definition}`);
            });
            if (meanings.synonyms && meanings.synonyms.length > 0) {
                hints.push(`Synonyms: ${meanings.synonyms.join(", ")}`);
            }
            if (meanings.antonyms && meanings.antonyms.length > 0) {
                hints.push(`Antonyms: ${meanings.antonyms.join(", ")}`);
            }
            if (data[0].origin) {
                hints.push(`Origin: ${data[0].origin}`);
            }
            // Add more hints as needed
            showHints();
        }

        function checkAnswer() {
            const guessInput = document.getElementById("guessInput").value.trim();
            if (guessInput.toLowerCase() === word.toLowerCase()) {
                gamecontainer.style.zIndex = "0"
                    gamedescription.style.zIndex = "2"
                    gamedescription.style.opacity = "2"
                    document.getElementById("desh1").textContent = "Congratulations, you have guessed the word correctly!"
                    document.getElementById("desp").textContent = `The word was "${word}".`
                    document.getElementById("desp").style.fontSize = "30px"
                    startgameBtn.innerHTML = "Try Again"
                    startgameBtn.onclick = function(){
                        window.location.href = "guesstheword.html"
                    }

            } else {
                document.getElementById("result").textContent = "Incorrect guess. Try again!";
                lives--; // Decrement the lives
                updateHearts()
                if (lives <= 0) {
                    // Reveal the answer if no lives left
                    gamecontainer.style.zIndex = "0"
                    gamedescription.style.zIndex = "2"
                    gamedescription.style.opacity = "2"
                    document.getElementById("desh1").textContent = `You've run out of lives!`
                    document.getElementById("desp").textContent = `The word was "${word}".`
                    document.getElementById("desp").style.fontSize = "30px"
                    startgameBtn.innerHTML = "Try Again"

                    startgameBtn.onclick = function(){
                        window.location.href = "guesstheword.html"
                    }
                }
            }
        }

        function updateHearts() {
            const hearts = document.querySelectorAll(".heart");
            for (let i = 0; i < hearts.length; i++) {
                if (i >= lives) {
                    // Fade out the hearts if they exceed remaining lives
                    hearts[i].style.opacity = '0';
                }
            }
        }

    </script>
</body>
</html>
